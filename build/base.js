define("base",["./modules","./domAbstraction"],function(e,t){var n={},o={};return function(){if("object"!=typeof n.dom)throw new ReferenceError("domAbstraction must have a dom object");if("function"!=typeof n.dom.query)throw new ReferenceError("domAbstraction must have a query method");if("function"!=typeof n.util.extend)throw new ReferenceError("domAbstraction must have a extend method");n=t}(),n.modules={audit:function(){var e;for(e in o)o.hasOwnProperty(e)&&console.log(o[e])},create:function(t,r,i){var s;if("string"==typeof t&&"function"==typeof r){if(s=r(e.create(n)),"function"!=typeof s.init||"function"!=typeof s.destroy)throw new Error("Modules MUST have an init and destroy methods");s=null,i="object"==typeof i?i:{},o[t]={id:t,create:r,instance:null,config:i}}},start:function(t,r){var i=o[t];n.util.extend(i.config,r),i&&(i.instance=i.create(e.create(n,t)),i.instance.init(r))},startAll:function(){var e;for(e in o)o.hasOwnProperty(e)&&null===o[e].instance&&n.modules.start(e,o[e].config)},stop:function(e){var t=o[e];if(!t||null===t.instance)throw new Error("Failed to stop module ["+e+"]");t.instance.destroy(),t.instance=null}},n.events={register:function(e,t){o[t]&&(o[t].events=e)},clear:function(e){o[e]&&(o[e].events=null)},trigger:function(e){var t,n;if(!e.hasOwnProperty("type"))throw new Error("Event object is missing its type property.");for(t in o)o.hasOwnProperty(t)&&(n=o[t],n.events&&n.events[e.type]&&n.events[e.type](e.data))}},n.debug={find:function(e){return o[e]||void 0},audit:function(){var e;for(e in o)o.hasOwnProperty(e)&&console.log({id:e,events:o[e].events})}},n});